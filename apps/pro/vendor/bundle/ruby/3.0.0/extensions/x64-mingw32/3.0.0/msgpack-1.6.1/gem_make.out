current directory: C:/Users/vagrant/pro/pkg/w32/bun/vendor/bundle/ruby/3.0.0/gems/msgpack-1.6.1/ext/msgpack
C:/Users/vagrant/pro/pkg/w32/ruby/bin/ruby.exe -I C:/Users/vagrant/pro/pkg/w32/ruby/lib/ruby/site_ruby/3.0.0 -r ./siteconf20230522-388-84ad75.rb extconf.rb
checking for ruby/st.h... yes
checking for st.h... no
checking for rb_enc_interned_str() in ruby.h... yes
checking for rb_hash_new_capa() in ruby.h... no
creating Makefile

current directory: C:/Users/vagrant/pro/pkg/w32/bun/vendor/bundle/ruby/3.0.0/gems/msgpack-1.6.1/ext/msgpack
make DESTDIR\= clean

current directory: C:/Users/vagrant/pro/pkg/w32/bun/vendor/bundle/ruby/3.0.0/gems/msgpack-1.6.1/ext/msgpack
make DESTDIR\=
generating msgpack-x64-mingw32.def
make: Warning: File '/C/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h' has modification time 16384 s in the future
compiling buffer.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from buffer.c:20:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_shift_chunk':
buffer.c:145:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  145 |     msgpack_buffer_chunk_t* next_head = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_read_to_string_nonblock':
buffer.c:178:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  178 |     size_t const length_orig = length;
      |     ^~~~~~
buffer.c: In function 'msgpack_buffer_all_readable_size':
buffer.c:234:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  234 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_add_new_chunk':
buffer.c:274:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  274 |         msgpack_buffer_chunk_t* nc = _msgpack_buffer_alloc_new_chunk(b);
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c:287:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  287 |         msgpack_buffer_chunk_t* nc = _msgpack_buffer_alloc_new_chunk(b);
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_append_reference':
buffer.c:314:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  314 |     char* data = RSTRING_PTR(mapped_string);
      |     ^~~~
buffer.c: In function '_msgpack_buffer_chunk_malloc':
buffer.c:355:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  355 |             char* buffer = msgpack_rmem_alloc(&s_rmem);
      |             ^~~~
buffer.c:366:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  366 |             char* buffer = b->rmem_last;
      |             ^~~~
buffer.c:380:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  380 |     void* mem = xmalloc(required_size);
      |     ^~~~
buffer.c: In function '_msgpack_buffer_chunk_realloc':
buffer.c:393:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  393 |     size_t next_size = *current_size * 2;
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_expand':
buffer.c:428:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  428 |     size_t capacity = b->tail.last - b->tail.first;
      |     ^~~~~~
buffer.c:435:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  435 |         char* mem = _msgpack_buffer_chunk_malloc(b, &b->tail, length, &capacity);
      |         ^~~~
buffer.c: In function 'msgpack_buffer_all_as_string':
buffer.c:513:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  513 |     size_t length = msgpack_buffer_all_readable_size(b);
      |     ^~~~~~
buffer.c:522:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  522 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_all_as_string_array':
buffer.c:547:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  547 |     VALUE ary = rb_ary_new();
      |     ^~~~~
buffer.c:552:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  552 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_flush_to_io':
buffer.c:572:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  572 |     VALUE s = _msgpack_buffer_head_chunk_as_string(b);
      |     ^~~~~
buffer.c:574:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  574 |     size_t sz = RSTRING_LEN(s);
      |     ^~~~~~
buffer.c:588:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  588 |         msgpack_buffer_chunk_t* c = b->head->next;
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_feed_from_io':
buffer.c:616:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  616 |     size_t len = RSTRING_LEN(b->io_buffer);
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_read_from_io_to_string':
buffer.c:645:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  645 |     VALUE ret = rb_funcall(b->io, b->io_partial_read_method, 2, SIZET2NUM(MIN(b->io_buffer_size, length)), b->io_buffer);
      |     ^~~~~
buffer.c:649:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  649 |     size_t rl = RSTRING_LEN(b->io_buffer);
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_skip_from_io':
buffer.c:663:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  663 |     VALUE ret = rb_funcall(b->io, b->io_partial_read_method, 2, SIZET2NUM(length), b->io_buffer);
      |     ^~~~~
compiling buffer_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer_class.c:21:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
buffer_class.c: In function 'Buffer_free':
buffer_class.c:49:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   49 |     msgpack_buffer_t* b = (msgpack_buffer_t*) data;
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_initialize':
buffer_class.c:179:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  179 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_write':
buffer_class.c:217:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  217 |     size_t length = msgpack_buffer_append_string(b, string);
      |     ^~~~~~
buffer_class.c: In function 'Buffer_skip':
buffer_class.c:338:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  338 |     size_t sz = read_until_eof(b, Qnil, n);
      |     ^~~~~~
buffer_class.c: In function 'Buffer_read_all':
buffer_class.c:382:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  382 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_read':
buffer_class.c:428:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  428 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_read_all':
buffer_class.c:370:13: warning: this statement may fall through [-Wimplicit-fallthrough=]
  370 |         out = argv[1];
      |         ~~~~^~~~~~~~~
buffer_class.c:372:5: note: here
  372 |     case 1:
      |     ^~~~
buffer_class.c: In function 'Buffer_read':
buffer_class.c:416:13: warning: this statement may fall through [-Wimplicit-fallthrough=]
  416 |         out = argv[1];
      |         ~~~~^~~~~~~~~
buffer_class.c:418:5: note: here
  418 |     case 1:
      |     ^~~~
compiling extension_value_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
compiling factory_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from factory_class.c:20:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from buffer_class.h:21,
                 from factory_class.c:22:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer_class.h:21,
                 from factory_class.c:23:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
factory_class.c: In function 'MessagePack_Factory_packer':
factory_class.c:159:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  159 |     msgpack_packer_t* pk = MessagePack_Packer_get(packer);
      |     ^~~~~~~~~~~~~~~~
factory_class.c: In function 'MessagePack_Factory_unpacker':
factory_class.c:175:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  175 |     msgpack_unpacker_t* uk = MessagePack_Unpacker_get(unpacker);
      |     ^~~~~~~~~~~~~~~~~~
compiling packer.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer.h:21,
                 from packer.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer.c:19:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer.c:19:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
packer.c: In function 'msgpack_packer_write_array_value':
packer.c:64:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   64 |     unsigned int len32 = (unsigned int)len;
      |     ^~~~~~~~
packer.c:67:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   67 |     unsigned int i;
      |     ^~~~~~~~
packer.c: In function 'write_hash_foreach':
packer.c:79:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   79 |     msgpack_packer_t* pk = (msgpack_packer_t*) pk_value;
      |     ^~~~~~~~~~~~~~~~
packer.c: In function 'msgpack_packer_write_hash_value':
packer.c:93:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   93 |     unsigned int len32 = (unsigned int)len;
      |     ^~~~~~~~
packer.c: In function 'msgpack_packer_try_write_with_ext_type_lookup':
packer.c:127:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  127 |         int exception_occured = 0;
      |         ^~~
compiling packer_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer.h:21,
                 from packer_class.c:21:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer_class.c:21:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer_class.c:21:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
packer_class.c: In function 'MessagePack_Packer_initialize':
packer_class.c:87:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   87 |     VALUE io = Qnil;
      |     ^~~~~
packer_class.c:107:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  107 |     msgpack_packer_t *pk = MessagePack_Packer_get(self);
      |     ^~~~~~~~~~~~~~~~
packer_class.c: In function 'Packer_write_bin':
packer_class.c:187:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  187 |     VALUE enc = rb_enc_from_encoding(rb_ascii8bit_encoding());
      |     ^~~~~
packer_class.c: In function 'Packer_write_extension':
packer_class.c:236:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  236 |     int ext_type = FIX2INT(RSTRUCT_GET(obj, 0));
      |     ^~~
packer_class.c:240:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  240 |     VALUE payload = RSTRUCT_GET(obj, 1);
      |     ^~~~~
packer_class.c: In function 'Packer_write_float32':
packer_class.c:274:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  274 |     msgpack_packer_t *pk = MessagePack_Packer_get(self);
      |     ^~~~~~~~~~~~~~~~
compiling packer_ext_registry.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer_ext_registry.c:19:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
packer_ext_registry.c: In function 'msgpack_packer_ext_registry_put':
packer_ext_registry.c:69:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   69 |     VALUE entry = rb_ary_new3(4, INT2FIX(ext_type), proc, arg, INT2FIX(flags));
      |     ^~~~~
compiling rbinit.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer_class.h:21,
                 from rbinit.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer_class.h:21,
                 from rbinit.c:20:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer_class.h:21,
                 from rbinit.c:20:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
compiling rmem.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from rmem.c:19:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
rmem.c: In function '_msgpack_rmem_alloc2':
rmem.c:59:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   59 |         msgpack_rmem_chunk_t* array = xrealloc(pm->array_first, capacity * sizeof(msgpack_rmem_chunk_t));
      |         ^~~~~~~~~~~~~~~~~~~~
rmem.c:69:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   69 |     msgpack_rmem_chunk_t tmp = pm->head;
      |     ^~~~~~~~~~~~~~~~~~~~
rmem.c: In function '_msgpack_rmem_chunk_free':
rmem.c:90:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   90 |     msgpack_rmem_chunk_t tmp = *pm->array_first;
      |     ^~~~~~~~~~~~~~~~~~~~
compiling unpacker.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from unpacker.h:21,
                 from unpacker.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from unpacker.c:20:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
unpacker.c: In function 'object_complete_ext':
unpacker.c:191:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  191 |     int ext_flags;
      |     ^~~
unpacker.c: In function '_msgpack_unpacker_stack_push':
unpacker.c:222:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  222 |     msgpack_unpacker_stack_entry_t* next = &uk->stack->data[uk->stack->depth];
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
unpacker.c: In function 'read_raw_body_cont':
unpacker.c:294:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |     int ret;
      |     ^~~
unpacker.c: In function 'read_raw_body_begin':
unpacker.c:322:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  322 |             msgpack_unpacker_stack_t* child_stack = _msgpack_unpacker_new_stack();
      |             ^~~~~~~~~~~~~~~~~~~~~~~~
unpacker.c:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     size_t length = uk->reading_raw_remaining;
      |     ^~~~~~
unpacker.c:348:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  348 |                 VALUE string = msgpack_buffer_read_top_as_string(UNPACKER_BUFFER_(uk), length, will_freeze, raw_type == RAW_TYPE_STRING);
      |                 ^~~~~
unpacker.c: In function 'read_primitive':
unpacker.c:369:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  369 |     int b = get_head_byte(uk);
      |     ^~~
unpacker.c:417:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  417 |                 uint8_t length = cb->u8;
      |                 ^~~~~~~
unpacker.c:429:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  429 |                 uint16_t length = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:441:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  441 |                 uint32_t length = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:467:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  467 |                 uint8_t u8 = cb->u8;
      |                 ^~~~~~~
unpacker.c:474:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  474 |                 uint16_t u16 = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:481:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  481 |                 uint32_t u32 = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:488:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  488 |                 uint64_t u64 = _msgpack_be64(cb->u64);
      |                 ^~~~~~~~
unpacker.c:495:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  495 |                 int8_t i8 = cb->i8;
      |                 ^~~~~~
unpacker.c:502:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  502 |                 int16_t i16 = _msgpack_be16(cb->i16);
      |                 ^~~~~~~
unpacker.c:509:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  509 |                 int32_t i32 = _msgpack_be32(cb->i32);
      |                 ^~~~~~~
unpacker.c:516:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  516 |                 int64_t i64 = _msgpack_be64(cb->i64);
      |                 ^~~~~~~
unpacker.c:523:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  523 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:531:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  531 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:539:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  539 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:547:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  547 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:555:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  555 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:564:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  564 |                 uint8_t count = cb->u8;
      |                 ^~~~~~~
unpacker.c:573:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  573 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:582:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  582 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:591:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  591 |                 uint8_t count = cb->u8;
      |                 ^~~~~~~
unpacker.c:600:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  600 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:609:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  609 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:618:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  618 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:628:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  628 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:638:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  638 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:648:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  648 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c: In function 'msgpack_unpacker_read':
unpacker.c:758:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  758 |             size_t count = --top->count;
      |             ^~~~~~
compiling unpacker_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from unpacker.h:21,
                 from unpacker_class.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
unpacker_class.c: In function 'MessagePack_Unpacker_initialize':
unpacker_class.c:119:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  119 |     msgpack_unpacker_t *uk = MessagePack_Unpacker_get(self);
      |     ^~~~~~~~~~~~~~~~~~
unpacker_class.c: In function 'Unpacker_each_impl':
unpacker_class.c:287:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  287 |         VALUE v = msgpack_unpacker_get_last_object(uk);
      |         ^~~~~
unpacker_class.c: In function 'Unpacker_full_unpack':
unpacker_class.c:408:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  408 |     size_t extra = msgpack_buffer_top_readable_size(UNPACKER_BUFFER_(uk));
      |     ^~~~~~
compiling unpacker_ext_registry.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
linking shared-object msgpack/msgpack.so
make: warning:  Clock skew detected.  Your build may be incomplete.

current directory: C:/Users/vagrant/pro/pkg/w32/bun/vendor/bundle/ruby/3.0.0/gems/msgpack-1.6.1/ext/msgpack
make DESTDIR\= install
make: Warning: File '/C/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h' has modification time 16361 s in the future
compiling buffer.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from buffer.c:20:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_shift_chunk':
buffer.c:145:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  145 |     msgpack_buffer_chunk_t* next_head = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_read_to_string_nonblock':
buffer.c:178:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  178 |     size_t const length_orig = length;
      |     ^~~~~~
buffer.c: In function 'msgpack_buffer_all_readable_size':
buffer.c:234:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  234 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_add_new_chunk':
buffer.c:274:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  274 |         msgpack_buffer_chunk_t* nc = _msgpack_buffer_alloc_new_chunk(b);
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c:287:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  287 |         msgpack_buffer_chunk_t* nc = _msgpack_buffer_alloc_new_chunk(b);
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_append_reference':
buffer.c:314:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  314 |     char* data = RSTRING_PTR(mapped_string);
      |     ^~~~
buffer.c: In function '_msgpack_buffer_chunk_malloc':
buffer.c:355:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  355 |             char* buffer = msgpack_rmem_alloc(&s_rmem);
      |             ^~~~
buffer.c:366:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  366 |             char* buffer = b->rmem_last;
      |             ^~~~
buffer.c:380:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  380 |     void* mem = xmalloc(required_size);
      |     ^~~~
buffer.c: In function '_msgpack_buffer_chunk_realloc':
buffer.c:393:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  393 |     size_t next_size = *current_size * 2;
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_expand':
buffer.c:428:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  428 |     size_t capacity = b->tail.last - b->tail.first;
      |     ^~~~~~
buffer.c:435:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  435 |         char* mem = _msgpack_buffer_chunk_malloc(b, &b->tail, length, &capacity);
      |         ^~~~
buffer.c: In function 'msgpack_buffer_all_as_string':
buffer.c:513:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  513 |     size_t length = msgpack_buffer_all_readable_size(b);
      |     ^~~~~~
buffer.c:522:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  522 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_all_as_string_array':
buffer.c:547:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  547 |     VALUE ary = rb_ary_new();
      |     ^~~~~
buffer.c:552:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  552 |     msgpack_buffer_chunk_t* c = b->head->next;
      |     ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function 'msgpack_buffer_flush_to_io':
buffer.c:572:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  572 |     VALUE s = _msgpack_buffer_head_chunk_as_string(b);
      |     ^~~~~
buffer.c:574:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  574 |     size_t sz = RSTRING_LEN(s);
      |     ^~~~~~
buffer.c:588:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  588 |         msgpack_buffer_chunk_t* c = b->head->next;
      |         ^~~~~~~~~~~~~~~~~~~~~~
buffer.c: In function '_msgpack_buffer_feed_from_io':
buffer.c:616:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  616 |     size_t len = RSTRING_LEN(b->io_buffer);
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_read_from_io_to_string':
buffer.c:645:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  645 |     VALUE ret = rb_funcall(b->io, b->io_partial_read_method, 2, SIZET2NUM(MIN(b->io_buffer_size, length)), b->io_buffer);
      |     ^~~~~
buffer.c:649:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  649 |     size_t rl = RSTRING_LEN(b->io_buffer);
      |     ^~~~~~
buffer.c: In function '_msgpack_buffer_skip_from_io':
buffer.c:663:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  663 |     VALUE ret = rb_funcall(b->io, b->io_partial_read_method, 2, SIZET2NUM(length), b->io_buffer);
      |     ^~~~~
compiling buffer_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer_class.c:21:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
buffer_class.c: In function 'Buffer_free':
buffer_class.c:49:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   49 |     msgpack_buffer_t* b = (msgpack_buffer_t*) data;
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_initialize':
buffer_class.c:179:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  179 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_write':
buffer_class.c:217:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  217 |     size_t length = msgpack_buffer_append_string(b, string);
      |     ^~~~~~
buffer_class.c: In function 'Buffer_skip':
buffer_class.c:338:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  338 |     size_t sz = read_until_eof(b, Qnil, n);
      |     ^~~~~~
buffer_class.c: In function 'Buffer_read_all':
buffer_class.c:382:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  382 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_read':
buffer_class.c:428:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  428 |     msgpack_buffer_t *b = MessagePack_Buffer_get(self);
      |     ^~~~~~~~~~~~~~~~
buffer_class.c: In function 'Buffer_read_all':
buffer_class.c:370:13: warning: this statement may fall through [-Wimplicit-fallthrough=]
  370 |         out = argv[1];
      |         ~~~~^~~~~~~~~
buffer_class.c:372:5: note: here
  372 |     case 1:
      |     ^~~~
buffer_class.c: In function 'Buffer_read':
buffer_class.c:416:13: warning: this statement may fall through [-Wimplicit-fallthrough=]
  416 |         out = argv[1];
      |         ~~~~^~~~~~~~~
buffer_class.c:418:5: note: here
  418 |     case 1:
      |     ^~~~
compiling extension_value_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from extension_value_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
compiling factory_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from factory_class.h:21,
                 from factory_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from factory_class.c:20:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from buffer_class.h:21,
                 from factory_class.c:22:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer_class.h:21,
                 from factory_class.c:23:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
factory_class.c: In function 'MessagePack_Factory_packer':
factory_class.c:159:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  159 |     msgpack_packer_t* pk = MessagePack_Packer_get(packer);
      |     ^~~~~~~~~~~~~~~~
factory_class.c: In function 'MessagePack_Factory_unpacker':
factory_class.c:175:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  175 |     msgpack_unpacker_t* uk = MessagePack_Unpacker_get(unpacker);
      |     ^~~~~~~~~~~~~~~~~~
compiling packer.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from packer.h:21,
                 from packer.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer.h:21,
                 from packer.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer.c:19:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer.c:19:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
packer.c: In function 'msgpack_packer_write_array_value':
packer.c:64:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   64 |     unsigned int len32 = (unsigned int)len;
      |     ^~~~~~~~
packer.c:67:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   67 |     unsigned int i;
      |     ^~~~~~~~
packer.c: In function 'write_hash_foreach':
packer.c:79:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   79 |     msgpack_packer_t* pk = (msgpack_packer_t*) pk_value;
      |     ^~~~~~~~~~~~~~~~
packer.c: In function 'msgpack_packer_write_hash_value':
packer.c:93:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   93 |     unsigned int len32 = (unsigned int)len;
      |     ^~~~~~~~
packer.c: In function 'msgpack_packer_try_write_with_ext_type_lookup':
packer.c:127:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  127 |         int exception_occured = 0;
      |         ^~~
compiling packer_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer.h:21,
                 from packer_class.c:21:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer_class.c:21:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer_class.c:21:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
packer_class.c: In function 'MessagePack_Packer_initialize':
packer_class.c:87:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   87 |     VALUE io = Qnil;
      |     ^~~~~
packer_class.c:107:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  107 |     msgpack_packer_t *pk = MessagePack_Packer_get(self);
      |     ^~~~~~~~~~~~~~~~
packer_class.c: In function 'Packer_write_bin':
packer_class.c:187:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  187 |     VALUE enc = rb_enc_from_encoding(rb_ascii8bit_encoding());
      |     ^~~~~
packer_class.c: In function 'Packer_write_extension':
packer_class.c:236:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  236 |     int ext_type = FIX2INT(RSTRUCT_GET(obj, 0));
      |     ^~~
packer_class.c:240:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  240 |     VALUE payload = RSTRUCT_GET(obj, 1);
      |     ^~~~~
packer_class.c: In function 'Packer_write_float32':
packer_class.c:274:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  274 |     msgpack_packer_t *pk = MessagePack_Packer_get(self);
      |     ^~~~~~~~~~~~~~~~
compiling packer_ext_registry.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from packer_ext_registry.h:21,
                 from packer_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from packer_ext_registry.c:19:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
packer_ext_registry.c: In function 'msgpack_packer_ext_registry_put':
packer_ext_registry.c:69:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   69 |     VALUE entry = rb_ary_new3(4, INT2FIX(ext_type), proc, arg, INT2FIX(flags));
      |     ^~~~~
compiling rbinit.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from buffer_class.h:21,
                 from rbinit.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from buffer_class.h:21,
                 from rbinit.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from packer.h:22,
                 from packer_class.h:21,
                 from rbinit.c:20:
packer_ext_registry.h: In function 'msgpack_packer_ext_registry_lookup':
packer_ext_registry.h:103:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  103 |     VALUE lookup_class = rb_class_of(instance);
      |     ^~~~~
packer_ext_registry.h:113:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  113 |     VALUE real_class = rb_obj_class(instance);
      |     ^~~~~
packer_ext_registry.h:124:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  124 |     VALUE args[2];
      |     ^~~~~
packer_ext_registry.h:129:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  129 |     VALUE superclass = args[1];
      |     ^~~~~
In file included from packer_class.h:21,
                 from rbinit.c:20:
packer.h: In function '_msgpack_packer_write_uint16':
packer.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint32':
packer.h:116:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  116 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_uint64':
packer.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int16':
packer.h:136:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  136 |     uint16_t be = _msgpack_be16(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int32':
packer.h:143:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  143 |     uint32_t be = _msgpack_be32(v);
      |     ^~~~~~~~
packer.h: In function '_msgpack_packer_write_int64':
packer.h:150:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  150 |     uint64_t be = _msgpack_be64(v);
      |     ^~~~~~~~
packer.h: In function 'msgpack_packer_write_float':
packer.h:265:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  265 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_double':
packer.h:277:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  277 |     union {
      |     ^~~~~
packer.h: In function 'msgpack_packer_write_raw_header':
packer.h:290:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  290 |         unsigned char h = 0xa0 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:294:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:298:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  298 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:302:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  302 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_bin_header':
packer.h:311:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  311 |         unsigned char be = (uint8_t) n;
      |         ^~~~~~~~
packer.h:315:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  315 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:319:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  319 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_array_header':
packer.h:328:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  328 |         unsigned char h = 0x90 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:332:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  332 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:336:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_map_header':
packer.h:345:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  345 |         unsigned char h = 0x80 | (uint8_t) n;
      |         ^~~~~~~~
packer.h:349:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  349 |         uint16_t be = _msgpack_be16(n);
      |         ^~~~~~~~
packer.h:353:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  353 |         uint32_t be = _msgpack_be32(n);
      |         ^~~~~~~~
packer.h: In function 'msgpack_packer_write_ext':
packer.h:389:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  389 |             uint16_t be = _msgpack_be16(len);
      |             ^~~~~~~~
packer.h:394:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  394 |             uint32_t be = _msgpack_be32(len);
      |             ^~~~~~~~
packer.h: In function 'msgpack_packer_write_string_value':
packer.h:423:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  423 |     int encindex = ENCODING_GET(v);
      |     ^~~
compiling rmem.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from rmem.h:21,
                 from rmem.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from rmem.c:19:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
rmem.c: In function '_msgpack_rmem_alloc2':
rmem.c:59:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   59 |         msgpack_rmem_chunk_t* array = xrealloc(pm->array_first, capacity * sizeof(msgpack_rmem_chunk_t));
      |         ^~~~~~~~~~~~~~~~~~~~
rmem.c:69:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   69 |     msgpack_rmem_chunk_t tmp = pm->head;
      |     ^~~~~~~~~~~~~~~~~~~~
rmem.c: In function '_msgpack_rmem_chunk_free':
rmem.c:90:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   90 |     msgpack_rmem_chunk_t tmp = *pm->array_first;
      |     ^~~~~~~~~~~~~~~~~~~~
compiling unpacker.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from unpacker.h:21,
                 from unpacker.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
In file included from unpacker.c:20:
rmem.h: In function 'msgpack_rmem_free':
rmem.h:94:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   94 |     msgpack_rmem_chunk_t* c = pm->array_last - 1;
      |     ^~~~~~~~~~~~~~~~~~~~
unpacker.c: In function 'object_complete_ext':
unpacker.c:191:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  191 |     int ext_flags;
      |     ^~~
unpacker.c: In function '_msgpack_unpacker_stack_push':
unpacker.c:222:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  222 |     msgpack_unpacker_stack_entry_t* next = &uk->stack->data[uk->stack->depth];
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
unpacker.c: In function 'read_raw_body_cont':
unpacker.c:294:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  294 |     int ret;
      |     ^~~
unpacker.c: In function 'read_raw_body_begin':
unpacker.c:322:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  322 |             msgpack_unpacker_stack_t* child_stack = _msgpack_unpacker_new_stack();
      |             ^~~~~~~~~~~~~~~~~~~~~~~~
unpacker.c:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     size_t length = uk->reading_raw_remaining;
      |     ^~~~~~
unpacker.c:348:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  348 |                 VALUE string = msgpack_buffer_read_top_as_string(UNPACKER_BUFFER_(uk), length, will_freeze, raw_type == RAW_TYPE_STRING);
      |                 ^~~~~
unpacker.c: In function 'read_primitive':
unpacker.c:369:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  369 |     int b = get_head_byte(uk);
      |     ^~~
unpacker.c:417:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  417 |                 uint8_t length = cb->u8;
      |                 ^~~~~~~
unpacker.c:429:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  429 |                 uint16_t length = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:441:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  441 |                 uint32_t length = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:467:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  467 |                 uint8_t u8 = cb->u8;
      |                 ^~~~~~~
unpacker.c:474:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  474 |                 uint16_t u16 = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:481:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  481 |                 uint32_t u32 = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:488:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  488 |                 uint64_t u64 = _msgpack_be64(cb->u64);
      |                 ^~~~~~~~
unpacker.c:495:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  495 |                 int8_t i8 = cb->i8;
      |                 ^~~~~~
unpacker.c:502:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  502 |                 int16_t i16 = _msgpack_be16(cb->i16);
      |                 ^~~~~~~
unpacker.c:509:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  509 |                 int32_t i32 = _msgpack_be32(cb->i32);
      |                 ^~~~~~~
unpacker.c:516:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  516 |                 int64_t i64 = _msgpack_be64(cb->i64);
      |                 ^~~~~~~
unpacker.c:523:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  523 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:531:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  531 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:539:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  539 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:547:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  547 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:555:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  555 |                 int ext_type = cb->i8;
      |                 ^~~
unpacker.c:564:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  564 |                 uint8_t count = cb->u8;
      |                 ^~~~~~~
unpacker.c:573:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  573 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:582:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  582 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:591:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  591 |                 uint8_t count = cb->u8;
      |                 ^~~~~~~
unpacker.c:600:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  600 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:609:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  609 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:618:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  618 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:628:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  628 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c:638:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  638 |                 uint16_t count = _msgpack_be16(cb->u16);
      |                 ^~~~~~~~
unpacker.c:648:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  648 |                 uint32_t count = _msgpack_be32(cb->u32);
      |                 ^~~~~~~~
unpacker.c: In function 'msgpack_unpacker_read':
unpacker.c:758:13: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  758 |             size_t count = --top->count;
      |             ^~~~~~
compiling unpacker_class.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from buffer.h:21,
                 from unpacker.h:21,
                 from unpacker_class.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
In file included from unpacker.h:21,
                 from unpacker_class.c:19:
buffer.h: In function 'msgpack_buffer_read_1':
buffer.h:336:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  336 |     int r = (int) (unsigned char) b->read_buffer[0];
      |     ^~~
buffer.h: In function 'msgpack_buffer_read_to_string':
buffer.h:406:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  406 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_skip':
buffer.h:422:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  422 |     size_t avail = msgpack_buffer_top_readable_size(b);
      |     ^~~~~~
buffer.h: In function 'msgpack_buffer_read_top_as_string':
buffer.h:455:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  455 |     VALUE result;
      |     ^~~~~
unpacker_class.c: In function 'MessagePack_Unpacker_initialize':
unpacker_class.c:119:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  119 |     msgpack_unpacker_t *uk = MessagePack_Unpacker_get(self);
      |     ^~~~~~~~~~~~~~~~~~
unpacker_class.c: In function 'Unpacker_each_impl':
unpacker_class.c:287:9: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  287 |         VALUE v = msgpack_unpacker_get_last_object(uk);
      |         ^~~~~
unpacker_class.c: In function 'Unpacker_full_unpack':
unpacker_class.c:408:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  408 |     size_t extra = msgpack_buffer_top_readable_size(UNPACKER_BUFFER_(uk));
      |     ^~~~~~
compiling unpacker_ext_registry.c
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/int.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'RB_INT2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:88:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   88 |     const unsigned long j = i;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_idiv':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     const SIGNED_VALUE y = x - RUBY_FIXNUM_FLAG;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h: In function 'rbimpl_fix2long_by_shift':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/long.h:140:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  140 |     const SIGNED_VALUE y = x;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/fl_type.h:35,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h: In function 'RB_BUILTIN_TYPE':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/value_type.h:157:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  157 |     VALUE ret = RBASIC(obj)->flags & RUBY_T_MASK;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/char.h:29,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h: In function 'RSTRING_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rstring.h:109:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  109 |     VALUE f = RBASIC(str)->flags;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic.h:36,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:25,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h: In function 'RB_ST2FIX':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/arithmetic/st_data_t.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     unsigned long y = RBIMPL_CAST((unsigned long)x);
      |     ^~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:23,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_EMBED_LEN':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:123:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  123 |     VALUE f = RBASIC(ary)->flags;
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_PTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:248:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  248 |     VALUE tmp = RB_OBJ_WB_UNPROTECT_FOR(ARRAY, ary);
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h: In function 'RARRAY_ASET':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:227:5: note: in definition of macro 'RBIMPL_RARRAY_STMT'
  227 |     const VALUE rbimpl_ary = (ary);                          \
      |     ^~~~~
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rarray.h:255:5: note: in expansion of macro 'RARRAY_PTR_USE_TRANSIENT'
  255 |     RARRAY_PTR_USE_TRANSIENT(ary, ptr,
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:30,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h: In function 'ROBJECT_IVPTR':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/robject.h:86:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   86 |     struct RObject *const ptr = ROBJECT(obj);
      |     ^~~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core.h:31,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:26,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h: In function 'RREGEXP_SRC':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/core/rregexp.h:55:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   55 |     VALUE ret = RREGEXP(rexp)->src;
      |     ^~~~~
In file included from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/ruby.h:42,
                 from C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby.h:38,
                 from compat.h:22,
                 from unpacker_ext_registry.h:21,
                 from unpacker_ext_registry.c:19:
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h: In function 'rb_clone_setup':
C:/Users/vagrant/pro/pkg/w32/ruby/include/ruby-3.0.0/ruby/internal/newobj.h:56:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   56 |     const VALUE flags = RUBY_FL_PROMOTED0 | RUBY_FL_PROMOTED1 | RUBY_FL_FINALIZE;
      |     ^~~~~
linking shared-object msgpack/msgpack.so
/usr/bin/install -c -m 0755 msgpack.so ./.gem.20230522-388-m45yg0/msgpack
make: warning:  Clock skew detected.  Your build may be incomplete.
